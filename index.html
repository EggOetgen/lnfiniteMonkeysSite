<!DOCTYPE html>
<html>
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
<head>
  <script src="javascript/jquery-3.3.1.min.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Open+Sans|Raleway" rel="stylesheet">
  <script src="javascript/infiniteMonkeys.js"></script>

	<link href="infiniteMonkeys.css" rel="stylesheet" type="text/css" />
<title>Infinite Monkeys</title>
</head>
<body>


      <div id="container"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r79/three.min.js"></script>
      <script id="vertexShader" type="x-shader/x-vertex">
          void main() {
              gl_Position = vec4( position, 1.0 );
          }
      </script>
      <script id="fragmentShader" type="x-shader/x-fragment">
         // Author:
  // Title:

  #ifdef GL_ES
  precision highp float;
  #endif

  uniform vec2 u_resolution;
  uniform vec2 u_mouse;
  uniform float u_time;

  // params:
  // p: arbitrary point in 3D space
  // c: the center of our sphere
  // r: the radius of our sphere
  float distance_from_sphere(in vec3 p, in vec3 c, float r)
  {
      return length(p - c) - r;
  }

  float smin( float a, float b, float k )
{
    float h = clamp( 0.5+0.5*(b-a)/k, 0.0, 1.0 );
    return mix( b, a, h ) - k*h*(1.0-h);
}


  float map_the_world(in vec3 p)
  {
  //     float sphere_0 = distance_from_sphere(p, vec3(0.0), 1.0);

  //     // Later we might have sphere_1, sphere_2, cube_3, etc...

  //     return sphere_0;
  float u_timeS = u_time * 0.1;
      float displacement = sin(5.0* p.x) * sin(5.0 * p.y) * sin(5.0 * p.z) * 0.25;
      float sphere_0 = distance_from_sphere(p, vec3(sin(u_timeS),cos(u_timeS),min(sin(u_timeS),cos(u_timeS))), 0.5);
   	float sphere_2 = distance_from_sphere(p, vec3(cos(u_timeS),sin(u_timeS*02.3),max(sin(u_timeS),cos(u_timeS))) + vec3(-0.4), 1.0);

      return (smin(sphere_0, sphere_2, 1.0) + displacement* (sin(u_timeS)  )  );
  //     return (sphere_0 - sphere_2) + displacement   ;

  }

  vec3 calculate_normal(in vec3 p)
  {
      const vec3 small_step = vec3(0.001, 0.0, 0.0);

      float gradient_x = map_the_world(p + small_step.xyy) - map_the_world(p - small_step.xyy);
      float gradient_y = map_the_world(p + small_step.yxy) - map_the_world(p - small_step.yxy);
      float gradient_z = map_the_world(p + small_step.yyx) - map_the_world(p - small_step.yyx);

      vec3 normal = vec3(gradient_x, gradient_y, gradient_z);

      return normalize(normal);
  }


  vec3 ray_march(in vec3 ro, in vec3 rd)
  {
      float total_distance_traveled = 0.0;
      const int NUMBER_OF_STEPS = 32;
      const float MINIMUM_HIT_DISTANCE = 0.001;
      const float MAXIMUM_TRACE_DISTANCE = 1000.0;

      for (int i = 0; i < NUMBER_OF_STEPS; ++i)
      {
          // Calculate our current position along the ray
          vec3 current_position = ro + total_distance_traveled * rd;

          // We wrote this function earlier in the tutorial -
          // assume that the sphere is centered at the origin
          // and has unit radius
          float distance_to_closest = map_the_world(current_position);

          if (distance_to_closest < MINIMUM_HIT_DISTANCE) // hit
          {
             vec3 normal = calculate_normal(current_position);

              // For now, hard-code the light's position in our scene
              vec3 light_position = vec3(2.0, -0.5, 10.0 );

              // Calculate the unit direction vector that points from
     			// the point of intersection to the light source
  			vec3 direction_to_light = normalize(current_position - light_position);


      		float diffuse_intensity = max(0.0, dot(normal, direction_to_light));
              return vec3(0.842,0.951,1.000) * diffuse_intensity;
          }

          if (total_distance_traveled > MAXIMUM_TRACE_DISTANCE) // miss
          {
              break;
          }

          // accumulate the distance traveled thus far
          total_distance_traveled += distance_to_closest;
      }

      // If we get here, we didn't hit anything so just
      // return a background color (black)
      return vec3(0.850,0.637,0.653);
  }


  void main() {
      vec2 st = gl_FragCoord.xy/u_resolution.xy;
      st *=2.0;
      st -=1.0;
   //   st.x *= u_resolution.x/u_resolution.y;

      vec3 camera_position = vec3(0.0, 0.0, -3.0);
  	vec3 ro = camera_position;
  	vec3 rd = vec3(st, 1.0);

      vec3 color = vec3(0.);
      color = ray_march(ro,rd);

      gl_FragColor = vec4(color,1.0);
  }
      </script>
      <script>
          var container;
          var camera, scene, renderer;
          var uniforms;

          init();
          animate();

          function init() {
              container = document.getElementById( 'container' );

              camera = new THREE.Camera();
              camera.position.z = 1;

              scene = new THREE.Scene();

              var geometry = new THREE.PlaneBufferGeometry( 2, 2 );

              uniforms = {
                  u_time: { type: "f", value: 1.0 },
                  u_resolution: { type: "v2", value: new THREE.Vector2() },
                  u_mouse: { type: "v2", value: new THREE.Vector2() }
              };

              var material = new THREE.ShaderMaterial( {
                  uniforms: uniforms,
                  vertexShader: document.getElementById( 'vertexShader' ).textContent,
                  fragmentShader: document.getElementById( 'fragmentShader' ).textContent
              } );

              var mesh = new THREE.Mesh( geometry, material );
              scene.add( mesh );

              renderer = new THREE.WebGLRenderer();
              renderer.setPixelRatio( window.devicePixelRatio );

              container.appendChild( renderer.domElement );

              onWindowResize();
              window.addEventListener( 'resize', onWindowResize, false );

              document.onmousemove = function(e){
                uniforms.u_mouse.value.x = e.pageX
                uniforms.u_mouse.value.y = e.pageY
              }
          }

          function onWindowResize( event ) {
              renderer.setSize( window.innerWidth, window.innerHeight );
              uniforms.u_resolution.value.x = renderer.domElement.width;
              uniforms.u_resolution.value.y = renderer.domElement.height;
          }

          function animate() {
              requestAnimationFrame( animate );
              render();
          }

          function render() {
              uniforms.u_time.value += 0.05;
              renderer.render( scene, camera );
          }
      </script>



 <!-- <canvas id="glcanvas" width="640" height="480"></canvas> -->
<p id="demo"></p>

<div class="section group">
	<!-- <div class="col span_half_of_3"> -->

	<!-- </div> -->

	<!-- <div class="col span_2_of_3"> -->
		<div class ="left">
      <a href="#" id = "exit"> - </a>
      <div class = "rightScroll">
			<!-- <h1>Edmund Oetgen</h1> -->
      <div class = "shortLinks">
       <p>
         Infinite Monkeys
         <!-- <a href ="https://www.instagram.com/odmundeetgen/"> IG/</a>


       <a href = "https://github.com/EggOetgen">Git/</a>


        <a href = "mailto:e.s.oetgen@gmail.com">E-Mail/</a> -->


       </p>
     </div>
	      <div class = "bio">

             <!-- <button type="button" id = "menButton">Click Me!</button> -->
	     <h1 id = "title"> Infinite Monkeys</h1>
	     	<br>

	     <p class = "bio" id = "bio">
         Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Suspendisse aliquet arcu a ipsum. Nunc arcu est, pulvinar vitae, consectetuer ac, pellentesque interdum, augue. Fusce iaculis nulla et sapien. Aliquam erat volutpat. Etiam iaculis turpis nec libero. Nam adipiscing ullamcorper quam.
         <!-- Infinite Monkeys is Vytautas Niedvaras, Dimitris Kyriakoudis and Edmund Oetgen. -->
       </p>
         <br>
        <p class = "bio">
         <!-- Donec ac est eget elit consequat sollicitudin. In id odio quis tortor volutpat mollis. Nulla iaculis lobortis est. Pellentesque in elit vitae nulla tempus euismod. Nam non erat in lacus rutrum malesuada. Donec commodo purus sed quam posuere eleifend. -->
       </p>


       <div id = "mainImg">
       <img src="images/us.png" alt="HTML5 Icon" class= "mainBoxImg" >
     </div>


	      <!-- <divclass = "break"> </div> -->
	       <!-- <div class = "links">
	      	<p>
						<a href ="https://www.instagram.com/odmundeetgen/"> Instagram/</a>

	     	<br>
	     	  <a href = "https://github.com/EggOetgen">Github/</a>
	      	<br>

	     	   <a href = "mailto:e.s.oetgen@gmail.com">Email/</a>
	     	<br>

	      	</p>
	      </div> -->
			</div>
	<ul>
  </div>
	</div>


<div class = bottom>
	<div class = "right">

    <div class = "rightScroll">
    <div class="project" id = "project1">
    <!-- <img src="images/shellGif.gif" alt="HTML5 Icon" class= "projImage pRight"> -->
    <p class = "projText pLeft" >
      <a href = "#" class = projLink id = "projectLink1">Project One<a>
      <!-- A generative shell that can be manipulated by a users facial expressions, using computer vision and machine learning. -->
      <br>
       <!-- <a href = "mailto:e.s.oetgen@gmail.com" class ="projLink">Github page/</a> -->
    </p>
    </div>

    <div class="project" id = "project2">
    <!-- <img src="images/dwain.jpg" alt="HTML5 Icon" class= "projImage pLeft"> -->
    <p class = "projText pRight">
        <a href = "#" class = projLink id = "projectLink1">Project Two<a>
      <!-- D.W.A.I.N., a novel digital drum machine using machine learning. Neural networks are used to create arbitrary mappings between knobs and various synthesis parameters.
      <a class = "projLink" href = "https://soundcloud.com/oetgen/sets/dwain-demos">Audio Samples/</a> -->
       <!-- <a class = "projLink" href = "mailto:e.s.oetgen@gmail.com">Github page/</a> -->
    </p>
    </div>



		<div class="project" id = "project3">
	  <!-- <img src="images/FLIPA.JPG" alt="HTML5 Icon" class= "projImage pRight" > -->
	  <p class = "projText pLeft">
        <a href = "#" class = projLink id = "projectLink1">Project Two<a>
	  <!-- Software for generating beer recipes using swarm intelligence. -->
	  </p>
	  </div>
    <div class="project" id ="project4">
	  <!-- <img src="images/tactile.jpeg" alt="HTML5 Icon" class= "projImage pLeft"> -->

	  <p class = "projText pRight">
        <a href = "#" class = projLink id = "projectLink1">Project Three<a>
	  	<!-- Tactile, an instrument that explores the relationship between what we see and hear.
      <br>
         <a class = "projLink" href = "https://youtu.be/tgzE8__W5Rc">Video/</a> -->
        <!-- <a class = "projLink" href = "https://www.youtube.com/watch?time_continue=61&v=tgzE8__W5Rc">Video/</a> -->
	  </p>
	  </div>
    	<div class="project" id ="project5">
   <!-- <img src="images/reactionDiffusion.jpeg" alt="HTML5 Icon" class= "projImage pRight"> -->
   <p class = "projText pLeft">
       <a href = "#" class = projLink id = "projectLink1">Project Five<a>
    <!-- Generative image using limited diffusion aggregation. Invisible random walkers move around a 3D space, when they collide with a central node they solidfy and join the structure. -->
   </p>
  </div>
    <!-- <div class="project">
	  <img src="images/mangelbrot1.jpeg" alt="HTML5 Icon" class= "projImage">
	  <p class = "projText">
	  	Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed quis dapibus ligula, non egestas nunc. Suspendisse porta id
	  </p>
	  </div> -->

	   <div class="project"  id ="project6">
	  <!-- <img src="images/dust.jpg" alt="HTML5 Icon" class= "projImage pLeft"> -->
	  <p class = "projText pRight">
        <a href = "#" class = projLink id = "projectLink1">Project Six<a>
	  <!-- Particle system with force simulation, thousands of particles are drawn towards an invisible moving object. -->
	  </p>
	</div>

	  </ul>
	</div>
</div>
</div>
	<!-- </div> -->


	<!-- <div class="col span_half_of_3">

	 --></div>

</div>

</body>
<script src="javascript/gl-matrix.js"></script>
 <script src="javascript/shaders/webgl-demo.js"></script>
</html>
